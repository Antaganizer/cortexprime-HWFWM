<article class="{{viewClasses (concat 'traitSet-' actorTypeIndex '-' traitSetIndex) breadcrumbs}} trait-set">
  <header class="primary-heading flex-row flex-ac">
    <div class="flex-col col-12">
      <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.label'}}" type="text" value="{{traitSet.label}}">
    </div>
    <div class="flex-col">
      {{> "systems/cortexprime/templates/partials/remove-button.html"
        group=path
        itemKey=traitSetIndex
        itemName=traitSet.label
        setting='actorTypes'
        type="trash"
      }}
    </div>
  </header>
  <div>
    <div>
      <label>
        <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.hasDescription'}}" type="checkbox" {{checked
          traitSet.hasDescription}}>
        <span class="label">{{localize 'Description'}}</span>
      </label>
      {{#if traitSet.hasDescription}}
        <textarea name="{{concat 'actorTypes.' path '.' traitSetIndex '.description'}}">{{traitSet.description}}</textarea>
      {{/if}}
    </div>
  </div>
  <section>
    <header>
      <h2 class="section-sub-heading">{{localize 'TraitSettings'}}</h2>
    </header>
    <div class="flex-row flex-wrap">
      <div class="flex-col col-6">
        <label>
          <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasDescription'}}" type="checkbox" {{checked
            traitSet.settings.hasDescription}}>
          <span class="label">{{localize 'HasDescription'}}</span>
        </label>
      </div>
      <div class="flex-col col-6">
        <label>
          <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasLabel'}}" type="checkbox"
            {{checked traitSet.settings.hasLabel}}>
          <span class="label">{{localize 'HasLabels'}}</span>
        </label>
      </div>
      <div class="flex-col col-6">
        <label>
          <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasSfx'}}" type="checkbox" {{checked
            traitSet.settings.hasSfx}}>
          <span class="label">{{localize 'HasSfx'}}</span>
        </label>
      </div>
      <div class="flex-col col-6">
        <label>
          <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasSubTraits'}}" type="checkbox"
            {{checked traitSet.settings.hasSubTraits}}>
          <span class="label">{{localize 'HasSubTraits'}}</span>
        </label>
      </div>
      <div class="flex-col col-6">
        <label>
          <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasDice'}}" type="checkbox"
            {{checked traitSet.settings.hasDice}}>
          <span class="label">{{localize 'HasDice'}}</span>
        </label>
      </div>
    </div>
    {{#if traitSet.settings.hasSubTraits}}
      <div>
        <header>
          <h3 class="section-sub-heading">{{localize 'SubTraitSettings'}}</h2>
        </header>
        <div class="flex-row flex-wrap">
          <div class="flex-col col-6">
            <label>
              <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.subTraitsHaveDice'}}" type="checkbox" {{checked
                traitSet.settings.subTraitsHaveDice}}>
              <span class="label">{{localize 'SubTraitsHaveDice'}}</span>
            </label>
          </div>
          {{#if traitSet.settings.subTraitsHaveDice}}
            <div class="flex-col col-6">
              <label>
                <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.subTraitsDiceConsumable'}}" type="checkbox"
                  {{checked traitSet.settings.subTraitsDiceConsumable}}>
                <span class="label">{{localize 'ConsumableDice'}}</span>
              </label>
            </div>
          {{/if}}
        </div>
      </div>
    {{/if}}
    {{#if traitSet.settings.hasDice}}
      <div>
        <header>
          <h3 class="section-sub-heading">{{localize 'DiceSettings'}}</h2>
        </header>
        <div class="flex-row flex-wrap">
          <div class="flex-col col-6">
            <label>
              <input name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.diceConsumable'}}" type="checkbox"
                {{checked traitSet.settings.diceConsumable}}>
              <span class="label">{{localize 'ConsumableDice'}}</span>
            </label>
          </div>
        </div>
      </div>
    {{/if}}
    <div class="bkg-primary flex-row flex-ac flex-jsb my-2 py-1">
      <h3 class="flex-col col-12 primary-heading text-white">{{localize "PresetTraits"}}</h3>
      <div class="flex-col">
        <button class="btn btn-secondary btn-icon add-trait" data-path="{{path}}" data-actor-type="{{actorTypeIndex}}" data-trait-set="{{traitSetIndex}}" type="button">
          <i class="fa fa-plus"></i>
        </button>
      </div>
    </div>
    <ul class="list-style-none px-0">
      {{#each traitSet.traits as |trait traitIndex|}}
        <li class="pa-1 flex-row flex-ac">
          {{> "systems/cortexprime/templates/partials/reorder.html"
            class="flex-col pa-0"
            path=(concat ../path '.' ../traitSetIndex '.traits')
            currentIndex=traitIndex
            setting="actorTypes"
          }}
          <span class="section-sub-heading text-primary flex-col">{{or trait.name (concat '[' (localize 'NoName' ) ']')}}</span>
          <button class="view-change btn flex-col" data-name="{{trait.name}}" data-to="trait-{{../actorTypeIndex}}-{{../traitSetIndex}}-{{traitIndex}}">
            <i class="fa fa-edit ma-0"></i>
          </button>
        </li>
      {{/each}}
    </ul>
  </section>
</article>
