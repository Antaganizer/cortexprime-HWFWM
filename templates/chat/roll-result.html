<div>
  <div class="mb-2">
    {{#each dicePool as |sourcePool source|}}
      <div class="source my-1" data-source="{{source}}">
        <h2 class="section-sub-heading">{{source}}</h2>
        <div class="flex flex-ac flex-wrap">
          {{#each sourcePool as |dice|}}
            <div class="die-label flex-col ma-1 py-1 bkg-white ba-1-primary" data-label="{{dice.label}}">
              <div class="flex-row flex-ac">
                {{#if dice.label}}
                  <div class="flex-col pr-0">
                    <p class="bold text-black">{{dice.label}}</p>
                  </div>
                {{/if}}
                <div class="flex-col">
                  <div class="flex flex-ac">
                    {{#each dice.value as |dieRating|}}
                      <div class="die-icon-wrapper">
                        <div class="die-icon d{{dieRating}}" data-rating="{{dieRating}}">
                        </div>
                      </div>
                    {{/each}}
                  </div>
                </div>
              </div>
            </div>
          {{/each}}
        </div>
      </div>
    {{/each}}
  </div>
  <div class="pa-2 ba-1-primary bkg-light-grey">
    <div class="flex flex-c flex-wrap">
      {{#each rollResults.results as |rollResult|}}
        <div class="die-icon-wrapper my-1">
          <div class="die-icon d{{rollResult.faces}} {{ternary rollResult.total 'chosen' (ternary rollResult.effect 'effect' 'result')}}">
            <div class="value">{{rollResult.result}}</div>
          </div>
          <div class="bold text-primary">d{{rollResult.faces}}</div>
        </div>
      {{/each}}
      {{#each rollResults.hitches as |rollResult|}}
      <div class="die-icon-wrapper my-1">
        <div class="die-icon d{{rollResult.faces}} hitch">
          <div class="value">1</div>
        </div>
        <div class="bold text-primary">d{{rollResult.faces}}</div>
      </div>
      {{/each}}
    </div>
  </div>
  {{#if total}}
    <div class="flex-row my-2">
      <div class="flex-col col-6">
        <div class="ba-2-primary bkg-accent pa-2 text-center">
          <h3 class="section-sub-heading text-primary">{{localize 'Total'}}</h3>
          <p class="total-value pt-2 pb-1 section-heading text-dark-grey">{{total}}</p>
        </div>
      </div>
      <div class="flex-col col-6">
        <div class="ba-2-primary bkg-accent pa-2 text-center">
          <h3 class="section-sub-heading text-primary">{{localize 'EffectDice'}}</h3>
          <div class="effect-dice flex-row flex-c flex-wrap">
            {{#if effectDice}}
              {{#each effectDice as |effectDie|}}
                <div class="die-icon-wrapper my-1">
                  <div class="die-icon d{{effectDie}} effect">
                    <div class="value">{{effectDie}}</div>
                  </div>
                </div>
              {{/each}}
            {{else}}
              <div class="die-icon-wrapper my-1">
                <div class="die-icon d4 effect">
                  <div class="value">4</div>
                </div>
              </div>
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  {{/if}}
  <div class="mt-2 flex flex-jsb">
    <button class="btn btn-primary re-roll" type="button">
      {{localize 'Reroll'}}
    </button>
    <button class="btn btn-secondary send-to-pool" type="button">
      {{localize 'ToPool'}}
    </button>
  </div>
</div>